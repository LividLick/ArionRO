//===== Hercules Script ======================================
//= Hat Girl
//===== By: ==================================================
//= Toms and Tokeiburu
//===== Current Version: =====================================
//= 1.0
//===== Description: =========================================
//= Create hats.
//===== Additional Comments: =================================
//= 
//============================================================

prt_in,45,96,2	script	Middle Slot Master#slot	4_F_LUCILE,{
	setarray .@hats,
		19001,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19002,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19003,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19004,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19005,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19006,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19007,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19008,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19009,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19010,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19011,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19012,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19013,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19014,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19015,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19016,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19017,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19018,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19019,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19020,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19021,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19022,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19023,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19024,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19025,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19026,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19027,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19028,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19029,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19030,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19031,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19032,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19033,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19034,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19035,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19036,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19037,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19038,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19039,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19040,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19041,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19042,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19043,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19044,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19045,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19046,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19047,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19048,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19049,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19050,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19051,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19052,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19053,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19054,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19055,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19056,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19057,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19058,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19059,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000,
		19060,	1059,600,916,300,7512,100,7451,1,1030,1,-1,20000000;
		
		
		
	.@count = 1 + 6 * 2;
	.@endIndex = 0;
	
	for (.@i = 0; .@i < getarraysize(.@hats); .@i += .@count) {
		if (.@i == 0)
			.@menu$ = getitemname(.@hats[.@i]);
		else
			.@menu$ = .@menu$ + ":" + getitemname(.@hats[.@i]);
		
		.@endIndex++;
	}
	
		mes "[Headgear Master] ";
	mes "I can make any hat you wish for, as long as you bring me all the ingredients!";
	mes "Which hat would you like to know more about?";
	next;
	
	while(1) {
		.@j = select(.@menu$ + ":End Conversation") - 1;
		
		if (.@j >= .@endIndex) {
			close;
		}
		
		//mes "[Headgear Master]";
		mes "~ Recipe for ^009900" + getitemname(.@hats[.@j * .@count]) + "^000000 ~";
		mes " ";
		
		for (.@i = 1; .@i < .@count; .@i += 2) {
			if (.@hats[.@j * .@count + .@i] > 0) {
				mes .@hats[.@j * .@count + .@i + 1] + " ^0000ff" + getitemname(.@hats[.@j * .@count + .@i]) + "^000000";
			}
			else if (.@hats[.@j * .@count + .@i] == -1) {
				callfunc("ZenyToString",@a$,.@hats[.@j * .@count + .@i + 1]);
				mes @a$ + " ^0000ffzeny^000000";
			}
		}
		
		next;
		switch(select("Create the hat:I changed my mind!")) {
			case 1:
				mes "[Headgear Master]";
				
				.@hasItems = 1;
				
				for (.@i = 1; .@i < .@count; .@i += 2) {
					if (.@hats[.@j * .@count + .@i] > 0) {
						if (countitem(.@hats[.@j * .@count + .@i]) < .@hats[.@j * .@count + .@i + 1]) {
							if (.@hasItems > 0)
								mes "^ff0000You do not have the required items.^000000 You are missing : ";
							
							mes (.@hats[.@j * .@count + .@i + 1] - countitem(.@hats[.@j * .@count + .@i])) + " ^0000ff" + getitemname(.@hats[.@j * .@count + .@i]) + "^000000";
							.@hasItems = 0;
						}
					}
					else if (.@hats[.@j * .@count + .@i] == -1) {
						if (Zeny < .@hats[.@j * .@count + .@i + 1]) {
							if (.@hasItems > 0)
								mes "^ff0000You do not have the required items.^000000 You are missing : ";
							
							callfunc("ZenyToString",@a$,.@hats[.@j * .@count + .@i + 1] - Zeny);
							mes @a$ + " ^0000ffzeny^000000";
							.@hasItems = 0;
						}
					}
				}
				
				if (.@hasItems == 0) {
					close;
				}
				
				for (.@i = 1; .@i < .@count; .@i += 2) {
					if (.@hats[.@j * .@count + .@i] > 0) {
						delitem .@hats[.@j * .@count + .@i],.@hats[.@j * .@count + .@i + 1];
					}
					else if (.@hats[.@j * .@count + .@i] == -1) {
						Zeny -= .@hats[.@j * .@count + .@i + 1];
					}
				}
				
				emotion e_oh;
				mes "^3355FF*Vroooooom~~*";
				mes "*Bzzzzzt*";
				mes "*choogachooga*";
				mes "*Kapang!*^000000";
				getitem .@hats[.@j * .@count],1;
				close;
			break;
			case 2:
				break;
		}
	}
	close;
}
